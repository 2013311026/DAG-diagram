webpackJsonp([1],{"1weo":function(e,t){},"8e+E":function(e,t){},A4zf:function(e,t){},K1we:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var s=n("VU/8")({name:"App"},a,!1,function(e){n("1weo")},null,null).exports,o=n("/ocq"),c=n("woOf"),d=n.n(c),r=n("mvHQ"),l=n.n(r),u=n("Dd8w"),h=n.n(u),_=n("NYxO"),p={props:{DataAll:{type:Object},each:{type:Object},index:{type:Number}},computed:Object(_.c)({svgScale:function(e){return e.dagStore.svgSize}}),data:function(){return{isHover:!1,r_click_menu:!1,menu_style:{position:"absolute",left:"358px",top:"264px"}}},methods:h()({},Object(_.b)(["delEdge"]),{pathHover:function(){this.isHover=!0},pathOut:function(){this.isHover=!1},click_menu_cover:function(e){this.r_click_menu=!1,e.stopPropagation(),e.preventDefault(),e.cancelBubble=!0},delEdges:function(){var e={model_id:sessionStorage.newGraph,id:this.each.id};this.delEdge(e)},r_click:function(e){var t=e.offsetX/this.svgScale,n=e.offsetY/this.svgScale;this.menu_style=d()({},this.menu_style,{left:t-(sessionStorage.svg_left||0)+"px",top:n-(sessionStorage.svg_top||0)+"px"}),this.r_click_menu=!0,e.stopPropagation(),e.preventDefault(),e.cancelBubble=!0},computedLink:function(){if(this.DataAll){var e=this.each,t=e.dst_input_idx,n=e.dst_node_id,i=e.src_node_id,a=e.src_output_idx,s=this.DataAll.nodes.find(function(e){return e.id===i}),o=this.DataAll.nodes.find(function(e){return e.id===n}),c=s.pos_x+180/(s.out_ports.length+1)*(a+1),d=s.pos_y+30,r=o.pos_x+180/(o.in_ports.length+1)*(t+1),l=o.pos_y;return"M "+c+" "+d+"  Q "+c+" "+(d+50)+" "+(r+c)/2+" "+(l+d)/2+" T "+r+" "+l}return"M 0 0 T 0 0"},computedArrow:function(){if(this.DataAll){var e=this.each,t=e.dst_input_idx,n=e.dst_node_id,i=(e.src_node_id,e.src_output_idx,this.DataAll.nodes.find(function(e){return e.id===n})),a=i.pos_x+180/(i.in_ports.length+1)*(t+1),s=i.pos_y;return a+" "+(s+3)+" "+(a-3)+" "+(s-3)+" "+(a+3)+" "+(s-3)}return"0,0 0,0 0,0"},computedCx:function(){var e=this.each,t=e.src_node_id,n=e.src_output_idx,i=this.DataAll.nodes.find(function(e){return e.id===t});return""+(i.pos_x+180/(i.out_ports.length+1)*(n+1))},computedCy:function(){var e=this.each.src_node_id;return""+(this.DataAll.nodes.find(function(t){return t.id===e}).pos_y+30)}})},f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return this.DataAll?n("g",[n("path",{class:e.isHover||e.r_click_menu?"connector-hl":e.each.type&&"active"==e.each.type?"connector-active":e.each.type&&"success"==e.each.type?"connector":"defaultArrow",attrs:{d:e.computedLink()},on:{mouseover:e.pathHover,mouseout:e.pathOut,contextmenu:function(t){e.r_click(t)}}}),e._v(" "),n("polyline",{staticStyle:{stroke:"#006600"},attrs:{points:e.computedArrow()}}),e._v(" "),n("circle",{staticStyle:{stroke:"#006600","stroke-width":"2",fill:"#FFFFFF"},attrs:{cx:e.computedCx(),cy:e.computedCy(),r:"5"}}),e._v(" "),e.r_click_menu?n("g",[n("foreignObject",{staticStyle:{position:"relative"},attrs:{width:"100%",height:"100%"},on:{click:function(t){e.click_menu_cover(t)}}},[n("body",{style:e.menu_style,attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[n("div",{staticClass:"menu_contain"},[n("span",{on:{click:e.delEdges}},[e._v("删除")])])])])],1):e._e()]):e._e()},staticRenderFns:[]};var g=n("VU/8")(p,f,!1,function(e){n("c8Mx")},"data-v-17389faf",null).exports,m={props:{dragLink:{type:Object}},methods:{dragLinkPath:function(){var e=this.dragLink,t=e.fromX,n=e.fromY,i=e.toX,a=e.toY;return"M "+t+" "+n+"  Q "+t+" "+(n+50)+" "+(i+t)/2+" "+(n+a)/2+" T "+i+" "+a},computedArrow:function(){var e=this.dragLink,t=e.toX,n=e.toY;return t+" "+n+" "+(t-3)+" "+(n-6)+" "+(t+3)+" "+(n-6)}}},v={render:function(){var e=this.$createElement,t=this._self._c||e;return t("g",[t("path",{staticClass:"connector",attrs:{d:this.dragLinkPath()}}),this._v(" "),t("circle",{staticStyle:{stroke:"#006600","stroke-width":"2",fill:"#CCCCCC"},attrs:{cx:this.dragLink.fromX,cy:this.dragLink.fromY,r:"5"}}),this._v(" "),t("polyline",{staticStyle:{stroke:"#006600"},attrs:{points:this.computedArrow()}})])},staticRenderFns:[]};var b=n("VU/8")(m,v,!1,function(e){n("lJG7")},"data-v-ee915ae8",null).exports,y={props:{dragFrame:{type:Object}},methods:{}},S={render:function(){var e=this.$createElement,t=this._self._c||e;return t("g",{staticClass:"dragFrame",attrs:{transform:"translate("+this.dragFrame.posX+", "+this.dragFrame.posY+")"}},[t("foreignObject",{attrs:{width:"180",height:"30"}},[t("body",{staticStyle:{margin:"0"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[t("div",{staticClass:"dragFrameArea"})])])],1)},staticRenderFns:[]};var w=n("VU/8")(y,S,!1,function(e){n("rZyl")},"data-v-0cea0014",null).exports,x={props:{isEditAreaShow:{type:Object,default:function(){return{value:!1,x:-9999,y:-9999,id:null}}}},methods:h()({},Object(_.b)(["delNode"]),{click_menu_cover:function(e){this.$emit("close_click_nodes"),e.preventDefault(),e.cancelBubble=!0,e.stopPropagation()},get_menu_style:function(){return{position:"absolute",left:this.isEditAreaShow.x+"px",top:this.isEditAreaShow.y+"px"}},delEdges:function(){var e={model_id:sessionStorage.newGraph,id:this.isEditAreaShow.id};this.isEditAreaShow.id&&this.delNode(e),this.$emit("close_click_nodes")}})},A={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isEditAreaShow.value?n("g",[n("foreignObject",{staticStyle:{position:"relative"},attrs:{width:"100%",height:"100%"},on:{click:function(t){e.click_menu_cover(t)}}},[n("body",{style:e.get_menu_style(),attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[n("div",{staticClass:"menu_contain"},[n("span",{on:{click:e.delEdges}},[e._v("删除节点")]),e._v(" "),n("span",[e._v("编辑")]),e._v(" "),n("span",[e._v("干点别的啥")])])])])],1):e._e()},staticRenderFns:[]};var E=n("VU/8")(x,A,!1,function(e){n("Q57u")},"data-v-c50d4e1a",null).exports,D=(n("mDQ2"),{props:{currentEvent:{type:String,default:function(){""}},modelRunningStatus:{type:Boolean,default:function(){return!1}}},data:function(){return{changeScreen:"全"}},methods:{sizeExpend:function(){this.$emit("sizeExpend")},sizeShrink:function(){this.$emit("sizeShrink")},sizeInit:function(){this.$emit("sizeInit")},sel_area:function(e){this.$emit("sel_area"),e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0},fullScreen:function(){"全"===this.changeScreen?(this.changeScreen="关",document.getElementById("svgContent").webkitRequestFullScreen()):(this.changeScreen="全",document.webkitExitFullscreen())},changeModelRunningStatus:function(){this.$emit("changeModelRunningStatus",!this.modelRunningStatus)}}}),k={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g",[n("foreignObject",{staticStyle:{position:"relative"},attrs:{width:"200px",height:"30px"}},[n("body",{attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[n("div",{staticClass:"control_menu"},[n("span",{on:{click:e.changeModelRunningStatus}},[n("i",{class:e.modelRunningStatus?"el-icon-video-pause":"el-icon-video-play"})]),e._v(" "),n("span",{on:{click:e.sizeExpend}},[n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-fangda"}})])]),e._v(" "),n("span",{on:{click:e.sizeShrink}},[n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-suoxiao"}})])]),e._v(" "),n("span",{on:{click:e.sizeInit}},[n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-icon-test"}})])]),e._v(" "),n("span",{class:-1!==["sel_area","sel_area_ing"].indexOf(e.currentEvent)?"sel_ing":"",on:{click:function(t){e.sel_area(t)}}},[n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-duoxuankuang"}})])]),e._v(" "),n("span",{on:{click:e.fullScreen}},[n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#icon-quanping"}})])])])])])],1)},staticRenderFns:[]};var C=n("VU/8")(D,k,!1,function(e){n("K1we")},"data-v-48a95e82",null).exports,L={props:{simulate_sel_area:{type:Object,default:function(){return{left:0,top:0,width:0,height:0}}}},methods:{getSimulateSelArea:function(){var e=this.simulate_sel_area,t=e.left,n=e.top;return"width: "+e.width+"px; height: "+e.height+"px; left: "+t+"px; top: "+n+"px; border: 3px dashed #289de9;position: absolute;"}},mounted:function(){console.log("1")}},N={render:function(){var e=this.$createElement,t=this._self._c||e;return t("g",[t("foreignObject",{staticStyle:{position:"abolute"},attrs:{width:"100%",height:"100%"}},[t("body",{style:this.getSimulateSelArea(),attrs:{xmlns:"http://www.w3.org/1999/xhtml",id:"simulate_sel_area"}})])],1)},staticRenderFns:[]};var P=n("VU/8")(L,N,!1,function(e){n("h1uQ")},"data-v-5bad8e52",null).exports,O={props:{model_id:{type:String,default:null},template:{type:String,default:"default"}},computed:Object(_.c)({DataAll:function(e){return e.dagStore.DataAll},svgScale:function(e){return e.dagStore.svgSize},historyList:function(e){return e.dagStore.historyList}}),created:function(){var e=this;this.$nextTick(function(){e.setMouseWheelEvent()}),this.openGraph()},mounted:function(){sessionStorage.svg_left=0,sessionStorage.svg_top=0},methods:h()({},Object(_.b)(["openGraph","newGraph","addEdge","delEdge","addNode","delNode","showGraph","saveGraph","moveNode","changeSize","activeGraph","stopGraph"]),{startActive:function(){var e=this;console.log(this.step);var t=this.step;if(t===this.historyList.length||t>this.historyList.length||!this.modelRunningStatus)return!1;this.activeGraph(t),this.nextStep&&clearTimeout(this.nextStep),this.nextStep=setTimeout(function(){e.step++,e.startActive()},1e3*(this.historyList[t+1].time-this.historyList[t].time))},dragPre:function(e,t,n){this.setInitRect(),this.currentEvent="dragPane",this.choice.index=t,this.timeStamp=e.timeStamp,this.selPaneNode(n.id),this.setDragFramePosition(e),e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0},dragIng:function(e){switch(this.currentEvent){case"dragPane":e.timeStamp-this.timeStamp>200&&(this.currentEvent="PaneDraging");break;case"PaneDraging":this.setDragFramePosition(e);break;case"dragLink":this.setDragLinkPostion(e);break;case"sel_area_ing":this.setSelAreaPostion(e);break;case"move_graph":this.graphMoveIng(e)}},dragEnd:function(e){switch(this.currentEvent){case"PaneDraging":this.paneDragEnd(e);break;case"sel_area_ing":this.getSelNodes(this.simulate_sel_area)}this.currentEvent=null},svgMouseDown:function(e){this.setInitRect(),"sel_area"===this.currentEvent?this.selAreaStart(e):(this.currentEvent="move_graph",this.graphMovePre(e))},linkPre:function(e,t,n){this.setInitRect(),this.currentEvent="dragLink",this.choice=d()({},this.choice,{index:t,point:n}),this.setDragLinkPostion(e,!0),e.preventDefault(),e.stopPropagation()},linkEnd:function(e,t){if("dragLink"===this.currentEvent){var n={model_id:sessionStorage.newGraph,desp:{src_node_id:this.DataAll.nodes[this.choice.index].id,src_output_idx:this.choice.point,dst_node_id:this.DataAll.nodes[e].id,dst_input_idx:t}};this.addEdge(n)}this.currentEvent=null},sizeInit:function(){this.changeSize("init"),this.svg_left=0,this.svg_top=0,sessionStorage.svg_left=0,sessionStorage.svg_top=0},sizeExpend:function(){this.changeSize("expend")},sizeShrink:function(){this.changeSize("shrink")},onMouseWheel:function(e){var t=this;if(!e)return!1;var n=e.wheelDelta/10;this.canMouseWheelUse&&n*n>1&&(n>0?this.sizeExpend():this.sizeShrink(),this.canMouseWheelUse=!1,setTimeout(function(){t.canMouseWheelUse=!0},50))},setMouseWheelEvent:function(){var e=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n,!1)},t=document.getElementById("svgContent");e(t,"mousewheel",this.onMouseWheel),e(t,"DOMMouseScroll",this.onMouseWheel)},sel_area:function(){this.currentEvent="sel_area",this.simulate_sel_area={left:0,top:0,width:0,height:0}},paneDragEnd:function(e){this.dragFrame={dragFrame:!1,posX:0,posY:0};var t=(e.x-this.initPos.left-(sessionStorage.svg_left||0))/this.svgScale-90,n=(e.y-this.initPos.top-(sessionStorage.svg_top||0))/this.svgScale-15,i={model_id:sessionStorage.newGraph,id:this.DataAll.nodes[this.choice.index].id,pos_x:t,pos_y:n};this.moveNode(i)},selPaneNode:function(e){this.choice.paneNode.length=[],e&&this.choice.paneNode.push(e),console.log("目前选择的节点是",this.choice.paneNode)},selAreaStart:function(e){this.currentEvent="sel_area_ing";var t=(e.x-this.initPos.left-(sessionStorage.svg_left||0))/this.svgScale,n=(e.y-this.initPos.top-(sessionStorage.svg_top||0))/this.svgScale;this.simulate_sel_area={left:t,top:n,width:0,height:0}},setSelAreaPostion:function(e){var t=(e.x-this.initPos.left-(sessionStorage.svg_left||0))/this.svgScale,n=(e.y-this.initPos.top-(sessionStorage.svg_top||0))/this.svgScale,i=t-this.simulate_sel_area.left,a=n-this.simulate_sel_area.top;this.simulate_sel_area.width=i,this.simulate_sel_area.height=a},getSelNodes:function(e){var t=this;console.log("position",this.DataAll);var n=e.left,i=e.top,a=e.width,s=e.height;this.choice.paneNode.length=0,this.DataAll.nodes.forEach(function(e){e.pos_x>n&&e.pos_x<n+a&&e.pos_y>i&&e.pos_y<i+s&&t.choice.paneNode.push(e.id)}),console.log("目前选择的节点是",this.choice.paneNode),this.simulate_sel_area={left:0,top:0,width:0,height:0}},focusInput:function(e){e&&e.focus()},graphMovePre:function(e){var t=e.x,n=e.y;this.svg_trans_init={x:t,y:n},this.svg_trans_pre={x:this.svg_left,y:this.svg_top}},graphMoveIng:function(e){var t=this.svg_trans_init,n=t.x,i=t.y;this.svg_left=e.x-n+this.svg_trans_pre.x,this.svg_top=e.y-i+this.svg_trans_pre.y,sessionStorage.svg_left=this.svg_left,sessionStorage.svg_top=this.svg_top},setDragFramePosition:function(e){var t=e.x-this.initPos.left-(sessionStorage.svg_left||0),n=e.y-this.initPos.top-(sessionStorage.svg_top||0);this.dragFrame={posX:t/this.svgScale-90,posY:n/this.svgScale-15}},setDragLinkPostion:function(e,t){var n=(e.x-this.initPos.left-(sessionStorage.svg_left||0))/this.svgScale,i=(e.y-this.initPos.top-(sessionStorage.svg_top||0))/this.svgScale;t&&(this.dragLink=d()({},this.dragLink,{fromX:n,fromY:i})),this.dragLink=d()({},this.dragLink,{toX:n,toY:i})},close_click_nodes:function(){this.is_edit_area={value:!1,x:-9999,y:-9999}},r_click_nodes:function(e,t){this.setInitRect();var n=this.DataAll.nodes[t].id,i=e.x-this.initPos.left,a=e.y-this.initPos.top;this.is_edit_area={value:!0,x:i,y:a,id:n},e.stopPropagation(),e.cancelBubble=!0,e.preventDefault()},setInitRect:function(){var e=document.getElementById("svgContent").getBoundingClientRect(),t=e.left,n=e.top;this.initPos={left:t,top:n}},changeModelRunningStatus:function(e){e?(this.modelRunningStatus=e,this.startActive()):(this.step>0&&this.step--,this.modelRunningStatus=e,this.stopGraph())},getPaneNodeIconClass:function(e){var t="el-icon-timer";switch(e){case"active":t="el-icon-loading";break;case"success":t="el-icon-check paneSuccess";break;case"pause":t="el-icon-video-pause"}return t}}),data:function(){return{choice:{paneNode:[],index:-1,point:-1},dragFrame:{posX:9999,posY:9999},dragLink:{fromX:0,fromY:0,toX:0,toY:0},currentEvent:null,initPos:{left:-1,top:-1},timeStamp:"",is_edit_area:{value:!1,x:-9999,y:-9999},simulate_sel_area:{left:10,top:50,width:0,height:0},svg_left:0,svg_top:0,svg_trans_init:{x:0,y:0},canMouseWheelUse:!0,step:0,modelRunningStatus:!1,nextStep:null}},components:{Arrow:g,SimulateArrow:b,SimulateFrame:w,EditArea:E,Control:C,SimulateSelArea:P}},M={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{style:{cursor:"move_graph"===this.currentEvent?"grabbing":"grab"},attrs:{id:"svgContent",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",width:"100%",height:"1029","data-spm-anchor-id":"TODO.11007039.0.i6.12b64a9bcbXQmm"},on:{mousedown:e.svgMouseDown,mousemove:function(t){e.dragIng(t)},mouseup:function(t){e.dragEnd(t)}}},[n("g",{attrs:{transform:" translate("+e.svg_left+", "+e.svg_top+") scale("+e.svgScale+")"}},[e._l(e.DataAll.nodes,function(t,i){return n("g",{key:"_"+i,staticClass:"svgEach",attrs:{transform:"translate("+t.pos_x+", "+t.pos_y+")"},on:{contextmenu:function(t){e.r_click_nodes(t,i)},dblclick:function(t){e.focusInput(t.path[0])},mousedown:function(n){e.dragPre(n,i,t)}}},[n("foreignObject",{attrs:{width:"180",height:"30"}},[n("body",{staticStyle:{margin:"0"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[n("div",[n("div",{class:-1!==e.choice.paneNode.indexOf(t.id)?"pane-node-content selected":"pane-node-content"},[n("i",{class:e.getPaneNodeIconClass(t.type)+" icon icon-data"}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"item.name"}],staticClass:"name",attrs:{type:"text"},domProps:{value:t.name},on:{input:function(n){n.target.composing||e.$set(t,"name",n.target.value)}}})]),e._v(" "),n("div",{class:"dragLink"===e.currentEvent?"pane-node-parent-hl":"pane-node-parent"},e._l(t.in_ports,function(a,s){return n("div",{key:"__"+s,style:{width:100/(t.in_ports.length+1)+"%"}},[n("span",{staticClass:"space",on:{mouseup:function(t){e.linkEnd(i,s)}}})])})),e._v(" "),n("div",{staticClass:"pane-node-children"},e._l(t.out_ports,function(a,s){return n("div",{key:"___"+s,style:{width:100/(t.out_ports.length+1)+"%"}},[n("span",{staticClass:"space",on:{mousedown:function(t){e.linkPre(t,i,s)}}})])}))])])])],1)}),e._v(" "),"PaneDraging"===e.currentEvent?n("SimulateFrame",{attrs:{dragFrame:e.dragFrame}}):e._e(),e._v(" "),e._l(e.DataAll.edges,function(t,i){return n("Arrow",{key:"____"+i,attrs:{DataAll:e.DataAll,each:t,index:i}})}),e._v(" "),"dragLink"===e.currentEvent?n("SimulateArrow",{attrs:{dragLink:e.dragLink}}):e._e(),e._v(" "),-1!==["sel_area","sel_area_ing"].indexOf(e.currentEvent)?n("SimulateSelArea",{attrs:{simulate_sel_area:e.simulate_sel_area}}):e._e()],2),e._v(" "),n("EditArea",{attrs:{isEditAreaShow:e.is_edit_area},on:{close_click_nodes:e.close_click_nodes}}),e._v(" "),n("Control",{attrs:{modelRunningStatus:e.modelRunningStatus,currentEvent:e.currentEvent},on:{changeModelRunningStatus:e.changeModelRunningStatus,sizeInit:e.sizeInit,sizeExpend:e.sizeExpend,sizeShrink:e.sizeShrink,sel_area:e.sel_area}})],1)},staticRenderFns:[]};var z=n("VU/8")(O,M,!1,function(e){n("8e+E")},"data-v-55bea5c8",null).exports,F={props:{value:{type:String,default:"传入内容"},pos_x:{type:Number},pos_y:{type:Number}},data:function(){return{name:this.value,left:this.pos_x,top:this.pos_y}}},T={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"nodesBus-contain",style:{left:this.pos_x+90+"px",top:this.pos_y+30+"px"}},[t("div",{staticClass:"nodesBus"},[t("span",{staticClass:"icon"}),this._v(" "),t("span",{staticClass:"name"},[this._v(this._s(this.value))])])])},staticRenderFns:[]};var B=n("VU/8")(F,T,!1,function(e){n("vOju")},"data-v-5ff55f8f",null).exports,R={data:function(){return{dragBus:!1,busValue:{value:"name",pos_x:100,pos_y:100}}},methods:h()({},Object(_.b)(["addNode"]),{dragIt:function(e){sessionStorage.dragDes=l()({drag:!0,name:e})},startNodesBus:function(e){var t=null;if(sessionStorage.dragDes&&(t=JSON.parse(sessionStorage.dragDes)),t&&t.drag){var n=e.pageX,i=e.pageY;this.busValue=d()({},this.busValue,{pos_x:n,pos_y:i,value:t.name}),this.dragBus=!0}},moveNodesBus:function(e){if(this.dragBus){var t=e.pageX,n=e.pageY;this.busValue=d()({},this.busValue,{pos_x:t,pos_y:n})}},endNodesBus:function(e){var t=null;if(sessionStorage.dragDes&&(t=JSON.parse(sessionStorage.dragDes)),t&&t.drag&&"svgContent"===e.toElement.id){var n=t,i=(n.model_id,n.type),a=(e.offsetX-90-(sessionStorage.svg_left||0))/(sessionStorage.svgScale||1),s=(e.offsetY-15-(sessionStorage.svg_top||0))/(sessionStorage.svgScale||1),o={model_id:sessionStorage.newGraph,desp:{type:i,pos_x:a,pos_y:s,name:this.busValue.value}};this.addNode(o)}window.sessionStorage.dragDes=null,this.dragBus=!1}}),mounted:function(){},components:{dagContent:z,NodesBus:B}},G={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-content",on:{mousedown:function(t){e.startNodesBus(t)},mousemove:function(t){e.moveNodesBus(t)},mouseup:function(t){e.endNodesBus(t)}}},[e._m(0),e._v(" "),n("div",{staticClass:"mainContent"},[n("div",{staticClass:"nav"},[n("div",[e._v("↓↓↓拖动节点至右边↓↓↓")]),e._v(" "),n("div",{staticClass:"nodes_bus"},[n("span",{on:{mousedown:function(t){e.dragIt("Constant")}}},[e._v("这是一个常量")]),e._v(" "),n("span",{on:{mousedown:function(t){e.dragIt("Function")}}},[e._v("这是一个函数")])]),e._v(" "),e._m(1)]),e._v(" "),n("div",{staticClass:"DAG-content"},[n("dagContent")],1)]),e._v(" "),e.dragBus?n("nodes-bus",{attrs:{value:e.busValue.value,pos_x:e.busValue.pos_x,pos_y:e.busValue.pos_y}}):e._e()],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tapBar"},[t("div",{staticClass:"title"},[this._v("DAG 机器学习|流程图 可视化")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"helpContent"}},[n("p",[e._v("帮助:")]),e._v(" "),n("p",[e._v("1.画布拖动, 空白处摁下鼠标左键, 然后移动")]),e._v(" "),n("p",[e._v("2.节点拖动, 左键点击节点,按着左键拖动 ")]),e._v(" "),n("p",[e._v("3.关系建立, 在节点下部滑动鼠标, 鼠标移入小圆圈会改变状态, 然后摁着左键拖动到其他节点的顶部, 移入节点顶部变绿即可松手")]),e._v(" "),n("p",[e._v("4.删除节点, 节点上点右键,找删除")]),e._v(" "),n("p",[e._v("5.增加节点,拖动左侧节点实例到右侧")]),e._v(" "),n("p",[e._v("6.删除关系,关系连线上点右键, 找删除")]),e._v(" "),n("p",[e._v("7.全屏,左上角控制面板找全屏")]),e._v(" "),n("p",[e._v("8.放缩, 滚动鼠标滚轮,mac双指滑触摸,或者左上角控制面板找全屏")]),e._v(" "),n("p",[e._v("9.新增节点动态训练模拟,点击控制台的运行图标即可")])])}]};var I=n("VU/8")(R,G,!1,function(e){n("A4zf")},"data-v-f4f6254e",null).exports;i.default.use(o.a);var j=new o.a({routes:[{path:"/",name:"HomePage",component:I}]}),V=n("fZjL"),$=n.n(V),X=n("zL8q"),Y=n.n(X),U=[{from:"bf37cd8a88a2cb91",to:"bf37cd8a88a2cb9c"},{from:"bf37cd8a88a2cb91",to:"bf37cd8a88a2cb9b"},{from:"bf37cd8a88a2cb91",to:"bf37cd8a88a2cb9w"},{from:"bf37cd8a88a2cb91",to:"d0e294906a6a076f"},{from:"d0e294906a6a076f",to:"d0e294906a6a0766"},{from:"d0e294906a6a076f",to:"bb7b4d9341ffe881"},{from:"d0e294906a6a076f",to:"b5e0f0e3b6b24081"},{from:"d0e294906a6a076f",to:"7e1135653e4ceb48"},{from:"d0e294906a6a076f",to:"46ffab08872440d5"},{from:"d0e294906a6a076f",to:"f3bb46e711e89a28"},{from:"d0e294906a6a076f",to:"078d93b64d47125m"},{from:"078d93b64d47125m",to:"c82d433ad78a588b"},{from:"078d93b64d47125m",to:"078d93b64d47125b"},{from:"078d93b64d47125m",to:"0aba4979011e0cc8"},{from:"078d93b64d47125m",to:"4f9c15cdc02a35cs"},{from:"4f9c15cdc02a35cs",to:"aead66f6681c705a"},{from:"4f9c15cdc02a35cs",to:"4f9c15cdc02a35cb"}],H={bf37cd8a88a2cb91:{node_name:"Data",type:"waiting"},bf37cd8a88a2cb9c:{node_name:"step1",type:"waiting"},bf37cd8a88a2cb9b:{node_name:"business",type:"waiting"},bf37cd8a88a2cb9w:{node_name:"we",type:"waiting"},d0e294906a6a076f:{node_name:"step2",type:"waiting"},d0e294906a6a0766:{node_name:"shadow1",type:"waiting"},bb7b4d9341ffe881:{node_name:"shadow2",type:"waiting"},b5e0f0e3b6b24081:{node_name:"shadow3",type:"waiting"},"7e1135653e4ceb48":{node_name:"shadow4",type:"waiting"},"46ffab08872440d5":{node_name:"shadow5",type:"waiting"},f3bb46e711e89a28:{node_name:"shadow6",type:"waiting"},"078d93b64d47125m":{node_name:"shadow7",type:"waiting"},c82d433ad78a588b:{node_name:"shadow8",type:"waiting"},"078d93b64d47125b":{node_name:"shadow9",type:"waiting"},"0aba4979011e0cc8":{node_name:"shadow11",type:"waiting"},"4f9c15cdc02a35cs":{node_name:"shadow12",type:"waiting"},aead66f6681c705a:{node_name:"shadow13",type:"waiting"},"4f9c15cdc02a35cb":{node_name:"shadow14",type:"waiting"}},Q={bf37cd8a88a2cb91:1,bf37cd8a88a2cb9c:1,bf37cd8a88a2cb9b:1,bf37cd8a88a2cb9w:1,d0e294906a6a076f:2,d0e294906a6a0766:2,bb7b4d9341ffe881:2,b5e0f0e3b6b24081:2,"7e1135653e4ceb48":2,"46ffab08872440d5":2,f3bb46e711e89a28:2,"078d93b64d47125m":3,c82d433ad78a588b:3,"078d93b64d47125b":3,"0aba4979011e0cc8":3,"4f9c15cdc02a35cs":4,aead66f6681c705a:4,"4f9c15cdc02a35cb":4},W={1:["bf37cd8a88a2cb91","bf37cd8a88a2cb9w","bf37cd8a88a2cb9c","bf37cd8a88a2cb9b"],2:["d0e294906a6a076f","d0e294906a6a0766","bb7b4d9341ffe881","46ffab08872440d5","f3bb46e711e89a28","b5e0f0e3b6b24081","7e1135653e4ceb48"],3:["078d93b64d47125m","0aba4979011e0cc8","c82d433ad78a588b","078d93b64d47125b"],4:["4f9c15cdc02a35cs","4f9c15cdc02a35cb","aead66f6681c705a"]},Z=function(e){Object(X.Notification)(h()({},e,{duration:2e3}))},J={state:{DataAll:{edges:[],nodes:[]},svgSize:1,historyList:[{time:0,action:[{node_id:"bf37cd8a88a2cb91",node_name:"light",type:"running"}]},{time:.5,action:[{node_id:"bf37cd8a88a2cb9b",node_name:"light",type:"running"},{node_id:"bf37cd8a88a2cb9b",node_name:"light",type:"finished"},{node_id:"bf37cd8a88a2cb9c",node_name:"light",type:"running"}]},{time:2.9,action:[{node_id:"bf37cd8a88a2cb9c",node_name:"light",type:"finished"},{node_id:"bf37cd8a88a2cb9w",node_name:"light",type:"running"}]},{time:3.7,action:[{node_id:"bf37cd8a88a2cb91",node_name:"light",type:"finished"},{node_id:"bf37cd8a88a2cb9w",node_name:"light",type:"finished"}]},{time:3.99,action:[{node_id:"d0e294906a6a076f",node_name:"light",type:"running"}]},{time:4,action:[{node_id:"d0e294906a6a0766",node_name:"light",type:"running"}]},{time:4.022147,action:[{node_id:"d0e294906a6a0766",node_name:"Generage 674 Features",type:"finished"}]},{time:4.070223,action:[{node_id:"bb7b4d9341ffe881",node_name:"light",type:"running"}]},{time:4.079401,action:[{node_id:"bb7b4d9341ffe881",node_name:"light 0 Features",type:"finished"}]},{time:4.109985,action:[{node_id:"7e1135653e4ceb48",node_name:"light",type:"running"}]},{time:4.121786,action:[{node_id:"7e1135653e4ceb48",node_name:"light 0 Features",type:"finished"}]},{time:4.230074,action:[{node_id:"b5e0f0e3b6b24081",node_name:"light",type:"running"}]},{time:4.244237,action:[{node_id:"b5e0f0e3b6b24081",node_name:"light 0 Features",type:"finished"}]},{time:4.895238,action:[{node_id:"f3bb46e711e89a28",node_name:"light",type:"running"}]},{time:5.180696,action:[{node_id:"f3bb46e711e89a28",node_name:"light 8 Features",type:"finished"}]},{time:8.343367,action:[{node_id:"46ffab08872440d5",node_name:"light",type:"running"}]},{time:8.569715,action:[{node_id:"d0e294906a6a076f",node_name:"Features",type:"finished"},{node_id:"46ffab08872440d5",node_name:"light 45 Features",type:"finished"}]},{time:8.859715,action:[{node_id:"078d93b64d47125m",node_name:"Models",type:"running"}]},{time:8.869715,action:[{node_id:"078d93b64d47125b",node_name:"light",type:"running"}]},{time:8.975148,action:[{node_id:"078d93b64d47125b",node_name:"light",type:"finished"}]},{time:8.97659,action:[{node_id:"0aba4979011e0cc8",node_name:"light",type:"running"}]},{time:9.103898,action:[{node_id:"0aba4979011e0cc8",node_name:"light",type:"finished"}]},{time:9.105366,action:[{node_id:"c82d433ad78a588b",node_name:"light",type:"running"}]},{time:9.788222,action:[{node_id:"078d93b64d47125m",node_name:"Models",type:"finished"},{node_id:"c82d433ad78a588b",node_name:"light",type:"finished"}]},{time:10.078222,action:[{node_id:"4f9c15cdc02a35cs",node_name:"light",type:"running"}]},{time:10.088222,action:[{node_id:"4f9c15cdc02a35cb",node_name:"light",type:"running"}]},{time:10.719785,action:[{node_id:"4f9c15cdc02a35cb",node_name:"light",type:"finished"}]},{time:12.367431,action:[{node_id:"aead66f6681c705a",node_name:"light",type:"running"}]},{time:12.618698,action:[{node_id:"4f9c15cdc02a35cs",node_name:"Get Approved Amount 3258, PASS",type:"finished"},{node_id:"aead66f6681c705a",node_name:"light",type:"finished"}]}]},actions:{openGraph:function(e,t){var n,i=e.commit;n="正在初始化模型",X.Loading.service({lock:!0,text:n,background:"rgba(0, 0, 0, 0.7)"});var a=[],s=[];$()(H).map(function(e,t){var n=Q[e],i=W[Q[e]].indexOf(e),s=Q[e]%2!=0?-1:1;a.push({id:e,name:H[e].node_name,in_ports:[0],out_ports:[0],pos_x:700+250*s+10*(Math.random()-.5)+(0===i?0:500*s+Math.abs(5-i)*s*-75),pos_y:170*n-100+(0===i?0:50*(4-i))+10*(Math.random()-.5)})}),U.map(function(e,t){s.push({dst_input_idx:0,dst_node_id:e.to,id:t,src_output_idx:0,src_node_id:e.from})}),i("UPDATE_DATA",{edges:s,nodes:a})},activeGraph:function(e,t){(0,e.commit)("ACTIVE_DATA",e.state.historyList[t].action)},stopGraph:function(e){var t=e.commit;e.state;t("STOP_DATA")},showGraph:function(e,t){e.commit},newGraph:function(e,t){e.commit},addEdge:function(e,t){(0,e.commit)("ADD_EDGE_DATA",t.desp)},delEdge:function(e,t){(0,e.commit)("DEL_EDGE_DATA",t.id)},moveNode:function(e,t){(0,e.commit)("MOVE_NODE_DATA",t)},addNode:function(e,t){(0,e.commit)("ADD_NODE_DATA",t)},delNode:function(e,t){(0,e.commit)("DEL_NODE_DATA",t.id)},saveGraph:function(){},changeSize:function(e,t){(0,e.commit)("CHANGE_SIZE",t)}},mutations:{CHANGE_SIZE:function(e,t){switch(t){case"init":e.svgSize=1;break;case"expend":e.svgSize+=.1;break;case"shrink":e.svgSize-=.1;break;default:e.svgSize=e.svgSize}sessionStorage.svgScale=e.svgSize},ACTIVE_DATA:function(e,t){var n=e.DataAll.nodes,i=e.DataAll.edges,a={running:["节点激活","warning","激活","active"],finished:["训练完成","success","完成","success"]};t.map(function(e,t){n.forEach(function(n){n.id===e.node_id&&(n.type=a[e.type][3],n.name=e.node_name,window.setTimeout(function(){Z({title:a[e.type][0],type:a[e.type][1],message:e.node_name+"节点已"+a[e.type][2]})},200*t))}),i.forEach(function(t){t.dst_node_id===e.node_id&&(t.type=a[e.type][3])})}),e.DataAll=JSON.parse(l()(e.DataAll))},STOP_DATA:function(e){var t=e.DataAll.nodes,n=e.DataAll.edges;console.log(t,n),t.forEach(function(e){"active"===e.type&&(e.type="pause")}),n.forEach(function(e){"active"===e.type&&(e.type="pause")}),Z({title:"停止训练",type:"error",message:"模型训练已暂停!"}),e.DataAll=JSON.parse(l()(e.DataAll))},UPDATE_DATA:function(e,t){e.DataAll=t,X.Loading.service().close()},MOVE_NODE_DATA:function(e,t){e.DataAll.nodes.forEach(function(e,n){e.id===t.id&&(e.pos_x=t.pos_x,e.pos_y=t.pos_y)})},ADD_EDGE_DATA:function(e,t){var n=e.DataAll;n.edges.push(h()({},t,{id:e.DataAll.edges.length+10}));var i=!1;!function e(t,a){if(a>n.nodes.length)return i=!0,!1;n.edges.forEach(function(n){n.src_node_id===t&&(console.log("目标节点是",n.src_node_id,"次数为",a),e(n.dst_node_id,++a))})}(t.dst_node_id,1),i&&(n.edges.pop(),alert("禁止成环"))},DEL_EDGE_DATA:function(e,t){var n=[];e.DataAll.edges.forEach(function(e,i){e.id!==t&&n.push(e)}),e.DataAll.edges=n},DEL_NODE_DATA:function(e,t){var n=[],i=[];e.DataAll.edges.forEach(function(e){e.dst_node_id!==t&&e.src_node_id!==t&&n.push(e)}),e.DataAll.nodes.forEach(function(e){e.id!==t&&i.push(e)}),e.DataAll.edges=n,e.DataAll.nodes=i},ADD_NODE_DATA:function(e,t){e.DataAll.nodes.push(h()({},t.desp,{id:e.DataAll.nodes.length+100,in_ports:[0,1,2,3,4],out_ports:[0,1,2,3,4]}))}}};i.default.use(_.a);var q=new _.a.Store({modules:{dagStore:J}});n("tvR6");i.default.use(Y.a),i.default.config.productionTip=!1,new i.default({el:"#app",router:j,components:{App:s},template:"<App/>",store:q})},Q57u:function(e,t){},c8Mx:function(e,t){},h1uQ:function(e,t){},lJG7:function(e,t){},mDQ2:function(e,t){!function(e){var t,n='<svg><symbol id="icon-quanping" viewBox="0 0 1025 1024"><path d="M1014.331575 1013.87659C1009.09925 1020.075757 1001.421383 1024 991.98045 1024L703.975118 1024C686.287587 1024 671.955568 1009.667981 671.955568 991.98045 671.955568 974.292919 686.287587 960.017773 703.975118 960.017773L914.348681 960.984615 569.185893 615.821827 614.4 570.550847 959.9609 916.111747 959.9609 704.031991C959.9609 686.34446 974.292919 672.012441 991.98045 672.012441 1009.611108 672.012441 1023.943127 686.34446 1023.943127 704.031991L1024 991.07048C1024 1000.056429 1020.246376 1008.075535 1014.331575 1013.87659ZM991.98045 352.044432C974.292919 352.044432 959.9609 337.712413 959.9609 320.024882L960.984615 109.651319 615.764954 454.814107 570.550847 409.543127 916.054874 64.0391 703.975118 64.0391C686.287587 64.0391 671.955568 49.707081 671.955568 32.01955 671.955568 14.332019 686.287587 0 703.975118 0L991.07048 0C999.999556 0 1008.075535 3.753624 1013.87659 9.668425 1020.018884 14.90075 1023.943127 22.521744 1023.943127 32.01955L1023.943127 320.024882C1023.943127 337.712413 1009.611108 352.044432 991.98045 352.044432ZM409.543127 453.449153 63.982227 107.888253 63.982227 320.024882C63.982227 337.712413 49.650208 352.044432 32.01955 352.044432 14.332019 352.044432 0 337.712413 0 320.024882L0 32.92952C0 24.000444 3.696751 15.924465 9.611552 10.12341 14.843877 3.924243 22.521744 0 32.01955 0L319.968009 0C337.65554 0 351.987559 14.332019 351.987559 32.01955 351.987559 49.707081 337.65554 64.0391 319.968009 64.0391L109.594446 63.015385 454.814107 408.235046 409.543127 453.449153ZM32.01955 672.012441C49.650208 672.012441 63.982227 686.34446 63.982227 704.031991L63.015385 914.405554 408.178173 569.185893 453.449153 614.456873 107.888253 960.017773 319.968009 960.017773C337.65554 960.017773 351.987559 974.349792 351.987559 991.98045 351.987559 1009.667981 337.65554 1024 319.968009 1024L32.92952 1024C23.943571 1024 15.924465 1020.303249 10.12341 1014.388448 3.924243 1009.09925 0 1001.478256 0 991.98045L0 704.031991C0 686.34446 14.332019 672.012441 32.01955 672.012441Z"  ></path></symbol><symbol id="icon-fangda" viewBox="0 0 1024 1024"><path d="M801.895 481.895h-259.79v-259.79C542.105 205.479 528.627 192 512 192s-30.105 13.479-30.105 30.105v259.789h-259.79C205.479 481.895 192 495.373 192 512c0 16.627 13.479 30.105 30.105 30.105h259.789v259.789C481.895 818.521 495.373 832 512 832s30.105-13.479 30.105-30.105v-259.79h259.789C818.521 542.105 832 528.627 832 512c0-16.627-13.479-30.105-30.105-30.105z"  ></path></symbol><symbol id="icon-suoxiao" viewBox="0 0 1024 1024"><path d="M801.895 542.105h-579.79C205.479 542.105 192 528.627 192 512c0-16.627 13.479-30.105 30.105-30.105h579.789C818.521 481.895 832 495.373 832 512c0 16.627-13.479 30.105-30.105 30.105z"  ></path></symbol><symbol id="icon-icon-test" viewBox="0 0 1024 1024"><path d="M945.4 485.8h-53.9c-12.9-189-164.4-340.4-353.3-353.3v-42c0-14.4-11.8-26.2-26.2-26.2-14.4 0-26.2 11.8-26.2 26.2v42c-188.9 12.9-340.4 164.4-353.3 353.3H78.6c-14.4 0-26.2 11.8-26.2 26.2s11.8 26.2 26.2 26.2h53.9c12.9 188.9 164.4 340.4 353.3 353.3v42c0 14.4 11.8 26.2 26.2 26.2 14.4 0 26.2-11.8 26.2-26.2v-42c188.9-12.9 340.4-164.4 353.3-353.3h53.9c14.4 0 26.2-11.8 26.2-26.2s-11.8-26.2-26.2-26.2zM538.2 838.9V671.1c0-14.4-11.8-26.2-26.2-26.2-14.4 0-26.2 11.8-26.2 26.2v167.8c-160-12.7-287.9-140.7-300.7-300.7h156c14.4 0 26.2-11.8 26.2-26.2s-11.8-26.2-26.2-26.2h-156c12.7-160 140.7-287.9 300.7-300.7v167.8c0 14.4 11.8 26.2 26.2 26.2 14.4 0 26.2-11.8 26.2-26.2V185.1c160 12.7 287.9 140.7 300.7 300.7H683c-14.4 0-26.2 11.8-26.2 26.2s11.8 26.2 26.2 26.2h156c-12.8 160-140.8 288-300.8 300.7z" fill="#666666" ></path></symbol><symbol id="icon-duoxuankuang" viewBox="0 0 1024 1024"><path d="M140.8 140.8v742.4h742.4V140.8zM76.8 128a51.2 51.2 0 0 1 51.2-51.2h768a51.2 51.2 0 0 1 51.2 51.2v768a51.2 51.2 0 0 1-51.2 51.2h-768a51.2 51.2 0 0 1-51.2-51.2z" fill="#B9B9CF" ></path></symbol></svg>',i=function(e,t){t.firstChild?function(e,t){t.parentNode.insertBefore(e,t)}(e,t.firstChild):t.appendChild(e)};if((t=document.getElementsByTagName("script"))[t.length-1].getAttribute("data-injectcss")&&!e.__iconfont__svg__cssinject__){e.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(e){console&&console.log(e)}}!function(t){document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(t,0):document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e,!1),t()},!1):document.attachEvent&&function(e,t){var n=e.document,i=!1,a=function(){i||(i=!0,t())};(function e(){try{n.documentElement.doScroll("left")}catch(t){return void setTimeout(e,50)}a()})(),n.onreadystatechange=function(){"complete"==n.readyState&&(n.onreadystatechange=null,a())}}(e,t)}(function(){var e,t;(e=document.createElement("div")).innerHTML=n,n=null,(t=e.getElementsByTagName("svg")[0])&&(t.setAttribute("aria-hidden","true"),t.style.position="absolute",t.style.width=0,t.style.height=0,t.style.overflow="hidden",i(t,document.body))})}(window)},rZyl:function(e,t){},tvR6:function(e,t){},vOju:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.8bd21f33db1b4dd437c1.js.map